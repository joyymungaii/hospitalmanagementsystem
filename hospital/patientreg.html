<!DOCTYPE html>
<html lang="en">
<head>
  <title>Dashdash</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
  <style>
    /* Set height of the grid so .sidenav can be 100% (adjust as needed) */
    .row.content {height: 550px}
    
    /* Set gray background color and 100% height */
    .sidenav {
      background-color: #f1f1f1;            
      height: 100%;
      margin-top: 20px;
    }
    .sidenav {
        width: 20%;
        margin-left: 10px;
      }
        
    /* On small screens, set height to 'auto' for the grid */
    @media screen and (max-width: 767px) {
      .row.content {height: auto;} 
    }

    .banner {
        height: 100vh;
        background-color: #f1f1f1;
        padding-top: 10px;
        padding-left: 15px;
        width: 100%;
        display: flex;
        flex-direction: column;
      }

      .banner h2 {
        font-size: 20px;
        padding-left: 30px;
      }

      label,
      select {
        font-size: 14px;
        padding-right: 20PX;
      }
      input {
        border-radius: 2px;
        outline: none;
        border: none;
        width: 200px;
        height: 30px;
      }
      ::placeholder {
        font-size: 16px;
      }
      select {
        width: 200px;
        margin-top: 10px;
        height: 30px;
        border: none;
      }
      textarea{
        border: none;
        outline: none;
        width: 300px;
      }
      .onee{
        display: flex;
        gap: 80px;
        margin-bottom: 20px;
      }

      .twoo{
        display: flex;
        gap: 100px;
        margin-bottom: 20px;
      }

      .threee{
        display: flex;
        gap: 20px;

      }

      .dob{
        padding-top: 10px;
      }

      .dob input{
        padding-left: 30px;
        margin-left: 30px;
        border-radius: 2px;
      }

      h3{
        font-size: 16px;
        font-weight: bolder;
      }


      .doc{
        display: flex;
        gap: 30px;
        padding-bottom: 5px;
      }

      .lab{
        display: flex;
        gap: 70px;
      }

      .lab input{
        width: 200px;
      }


      .btn button{
        border: none;
        outline: none;
        width: 100px;
        height: 35px;
        border-radius: 10px;
        text-transform: uppercase;
        font-weight: 100;
        margin: 10px;
        background-color: #337AB7;
      }
  </style>
</head>
<body>

<nav class="navbar navbar-inverse visible-xs">
  <div class="container-fluid">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#myNavbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>                        
      </button>
      <a class="navbar-brand" href="#">Logo</a>
    </div>
    <div class="collapse navbar-collapse" id="myNavbar">
      <ul class="nav navbar-nav">
        <li class="active"><a href="#">Dashboard</a></li>
        <li><a href="#">Age</a></li>
        <li><a href="#">Gender</a></li>
        <li><a href="#">Geo</a></li>
      </ul>
    </div>
  </div>
</nav>

<div class="container-fluid">
  <div class="row content">
    <div class="col-sm-3 sidenav hidden-xs">
      <h2>Manyatta Hospital</h2>
      <ul class="nav nav-pills nav-stacked">
        <li class="active"><a href="nana.html">Dashboard</a></li>
        <li><a href="appointments.html">Appointments</a></li>
        <li><a href="patientreg.html">Patients Registration</a></li>
        <li><a href="staffreg.html">Staff Registration</a></li>
        <li><a href="vitals.html">Vitals</a></li>
        <li><a href="plist.html">Patients List</a></li>
        <li><a href="slist.html">Staff List</a></li>

      </ul><br>
    </div>
    <br>
    
    <div class="col-sm-9">
        <section class="one">
            <div class="banner">
                <h2>PATIENT REGISTRATION</h2>
                <h3>Personal Details</h3>
      
                <div class="onee">
                  <div class="fname">
                    <label for="fname">FirstName</label>
                    <input type="text" id="fname" name="fname" />
                  </div>
        
                  <div class="mname">
                    <label for="lname">MiddleName</label>
                    <input type="text" id="mname" name="mname" />
                  </div>
      
                  <div>
                    <label for="surname">Surname</label>
                    <input type="text" id="sname" name="sname" />
                  </div>
                </div>
                
                <div class="twoo">
                  <div class="dob">
                    <label for="dob">DOB</label>
                    <input type="date" id="dBox" />
                  </div>
      
                  <div>
                    <label for="gender">Gender</label>
                    <select id="gender">
                      <option value="Male">Male</option>
                      <option value="Female">Female</option>
                    </select>
                  </div>
      
                  <div>
                    <label for="County">County</label>
                    <select name="county" id="county">
                      <option value="narok">Mandera</option>
                      <option value="kisumu">Kisumu</option>
                      <option value="nairobi">Nairobi</option>
                      <option value="kiambu">Kiambu</option>
                    </select>
                  </div>
                </div>
                
                <div class="threee">
                  <div>
                    <label for="email">Email</label>
                    <input type="email" id="email" placeholder="joy@gmail.com" />
                  </div>
      
                  <div>
                    <label for="telephone">Telephone</label>
                    <input type="text" id="telephone" />
                  </div>
      
                  <div>
                    <label for="marital status">Marital Status</label>
                    <select id="status">
                      <option value="Single">Single</option>
                      <option value="Married">Married</option>
                    </select>
                  </div>
      
                  <div>
                    <label for="">RegNo</label>
                    <input type="number" id="RegNo" required>
                  </div>
                </div>
      
                <h3>Doctor's Assessment</h3>
                <div class="doc">
                  <div>
                    <label for="ailment">Patient Ailment/ Symptoms</label>
                    <textarea  id="ailment"></textarea>
                  </div>
      
                  <div>
                    <label for="priscription">Prescription</label>
                    <textarea  id="prescription"></textarea>
                  </div>
                </div>
      
                <h3>Labolatory</h3>
                <div class="lab">
                  <div>
                    <label for="test">Testing For</label>
                    <textarea  id="test"></textarea>
                  </div>
      
                  <div>
                    <label for="results">Results</label>
                    <textarea  id="results"></textarea>
                  </div>
                </div>
      
                <div class="btn">
                  <button id="save">save</button>
                  <button id="del">Delete</button>
                  <button id="update">Update</button>
                  <button id="fetch">Fetch</button>
                </div>
              
            </div>
          </section>
    </div>
  </div>
</div>
</body>

<script type="module">
    // Import the functions you need from the SDKs you need
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.13.0/firebase-app.js";
  
    // Your web app's Firebase configuration
    const firebaseConfig = {
      apiKey: "AIzaSyBw-LBdjMgvxWFQScTqSEEMcHXNmdQh91g",
      authDomain: "hospital-system-b6a60.firebaseapp.com",
      databaseURL: "https://hospital-system-b6a60-default-rtdb.firebaseio.com",
      projectId: "hospital-system-b6a60",
      storageBucket: "hospital-system-b6a60.appspot.com",
      messagingSenderId: "626119506670",
      appId: "1:626119506670:web:22d462a6686f1de6e491ff",
    };
  
    // Initialize Firebase
    const app = initializeApp(firebaseConfig);
  
    import {
      getDatabase,
      ref,
      get,
      set,
      child,
      update,
      remove,
    } from "https://www.gstatic.com/firebasejs/10.13.0/firebase-database.js";
  
    const db = getDatabase();
  
    //REFERENCE
    var firstName = document.getElementById("fname");
    var middleName = document.getElementById("mname");
    var surName = document.getElementById("sname");
    var dateBox = document.getElementById("dBox");
    var Gender = document.getElementById("gender");
    var County = document.getElementById("county");
    var Email = document.getElementById("email");
    var Telephone = document.getElementById("telephone");
    var Status = document.getElementById("status");
    var regNo = document.getElementById("RegNo");
    var Ailment = document.getElementById("ailment");
    var Prescription = document.getElementById("prescription");
    var Test = document.getElementById("test");
    var Results = document.getElementById("results");
  
    var Save = document.getElementById("save");
    var Delete = document.getElementById("del");
    var Update = document.getElementById("update");
    var Fetch = document.getElementById("fetch");


    function clearInputs() {
      firstName.value = "";
      middleName.value = "";
      surName.value = "";
      dateBox.value = "";
      Gender.selectedIndex = 0; // Reset to first option
      County.selectedIndex = 0; // Reset to first option
      Email.value = "";
      Telephone.value = "";
      Status.selectedIndex = 0; // Reset to first option
      regNo.value = "";
      Ailment.value = "";
      Prescription.value = "";
      Test.value = "";
      Results.value = "";
    }

  
    //INSERT DATA FUNCTION
    function InsertData() {
  set(ref(db, "ThePatient/" + regNo.value), {
    NameOfPat: firstName.value,
    middleNamePat: middleName.value,
    surNamePat: surName.value,
    DOB: dateBox.value,
    Gender: Gender.value,
    County: County.value,
    Email: Email.value,
    Telephone: Telephone.value,
    Status: Status.value,
    Rno: regNo.value,
    Ailment: Ailment.value,
    Prescription: Prescription.value,
    Test: Test.value,
    Results: Results.value,
  })
    .then(() => {
      alert("Data saved successfully");
      clearInputs(); // Call clearInputs here
    })
    .catch((error) => {
      alert("Unsuccessful, error: " + error);
    });
}
  
    //SELECT DATA FUNCTION FETCH
    function SelectData() {
      const dbref = ref(db);
  
      get(child(dbref, "ThePatient/" + regNo.value))
        .then((snapshot) => {
          if (snapshot.exists()) {
            firstName.value = snapshot.val().NameOfPat;
            middleName.value = snapshot.val().middleNamePat;
            surName.value = snapshot.val().surNamePat;
            dateBox.value = snapshot.val().DOB;
            Gender.value = snapshot.val().Gender;
            County.value = snapshot.val().County;
            Email.value = snapshot.val().Email;
            Telephone.value = snapshot.val().Telephone;
            Status.value = snapshot.val().Status;
            regNo.value = snapshot.val().Rno;
            Ailment.value = snapshot.val().Ailment;
            Prescription.value = snapshot.val().Prescription;
            Test.value = snapshot.val().Test;
            Results.value = snapshot.val().Results;
          } else {
            alert("No data found");
          }
        })
        .catch((error) => {
          alert("unsuccessful, error" + error);
        });
    }
  
    //UPDATE DATA FUNCTION
    function UpdateData() {
      update(ref(db, "ThePatient/" + regNo.value), {
        NameOfPat: firstName.value,
        middleNamePat: middleName.value,
        surNamePat: surName.value,
        DOB: dateBox.value,
        Gender: Gender.value,
        County: County.value,
        Email: Email.value,
        Telephone: Telephone.value,
        Status: Status.value,
        Rno: regNo.value,
        Ailment: Ailment.value,
        Prescription: Prescription.value,
        Test: Test.value,
        Results: Results.value,
      })
      .then(() => {
          alert("data saved successfully");
          clearInputs(); // Clear inputs after successful submission
        })
        .catch((error) => {
          alert("unsuccessful, error" + error);
        });
        clearInputs;
    }
  
    //DELETE DATA FUNCTION
    function DeleteData() {
    remove(ref(db, "ThePatient/" + regNo.value))
    .then(() => {
      alert("Data deleted successfully");
      clearInputs(); // Call clearInputs to clear the input fields
    })
    .catch((error) => {
      alert("Unsuccessful, error: " + error);
    });
}
    // Assign Events to Buttons
    Save.addEventListener("click", InsertData);
    Update.addEventListener("click", UpdateData);
    Fetch.addEventListener("click", SelectData);
    Delete.addEventListener("click", DeleteData);

  </script>
  
</body>
</html>
